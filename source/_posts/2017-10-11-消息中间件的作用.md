---
title: 消息队列的作用
toc: true
date: 2017-10-11 20:27:45
tags:
- Message Queue
categories:
- Middleware
---

消息队列是用于处理IPC（进程间通信）问题的一种方式， 它提供了一种异步的通信方式，每一个贮列中的纪录包含详细说明的数据，包含发生的时间，输入设备的种类，以及特定的输入参数，因而消息的发送者和接收者不需要同时与消息队列交互。消息会保存在[队列](https://zh.wikipedia.org/wiki/%E9%98%9F%E5%88%97)中，直到接收者取回它。

消息队列在分布式系统中也有着重要的作用。主要体现在一下几个方面：

<br/>

<!-- more -->

#### 1、 解耦合

下图对比了没有MQ和存在MQ情况下的系统的差异：

![Use Of MQ](/images/Message Queue/Use Of MQ.png)

在没有MQ的情况下，完成一个`交易服务`需要先注入其依赖的各种服务，而后在其内部去调用这几个服务才能完成功能，代码耦合度高，并且在一个服务内调用其他服务的模式需要等待处理的时间也会增多；

而在使用MQ的情况下，完成一个`交易服务`只需要将各类调用应用的消息发送至MQ即可，不需要在本服务内去完成各项服务的调用，耦合度降低。

<br/>

#### 2、并行处理

使用MQ可以使各个子服务并行地去处理，相比串行处理将大大缩短运行的时间。（串行处理所耗的时间是sum(p1+p2+...+pn)，而并行处理的耗时是max(p1, p2, ..., pn)）

<br/>

#### 3、异步处理

若一个操作的耗时非常久，这时我们引入消息队列，进行异步处理，应用就不必去等待这个操作的结束，可以得到更快的响应。

或者例如遇到抢购秒杀之类的应用情景时，引入消息队列可以用来先保存用户请求，之后再根据队列中请求的时间进行处理。

<br/>
